obs space:
  name: sfc
  obsdatain:
    engine:
      type: H5File
      obsfile: sfc_obs_$(OBS_DATE).nc4
  obsdataout:
    engine:
      type: H5File
      obsfile: sfc_diag_$(OBS_DATE).nc4
  simulated variables: [surface_pressure, air_temperature, virtual_temperature]
geovals:
  filename: sfc_geoval_$(OBS_DATE).nc4
vector ref: GsiHofXBc
tolerance: 0.01
obs operator:
  name: SfcPCorrected
  da_psfc_scheme: GSI
  geovar_sfc_geomz: surface_geometric_height
  geovar_geomz: geopotential_height
linear obs operator:
  name: Identity
obs pre filters:
- filter: Perform Action
  filter variables:
  - name: surface_pressure
  where:
  - variable: surface_pressure@ObsType
    is_in: [181]
  action:
    name: assign error
    error function:
      name: ObsErrorModelStepwiseLinear@ObsFunction
      options:
        xvar:
          name: ObsValue/surface_pressure
        xvals: [80000, 75000]
        errors: [110, 120]
- filter: Perform Action
  filter variables:
  - name: surface_pressure
  where:
  - variable: surface_pressure@ObsType
    is_in: [187]
  action:
    name: assign error
    error function:
      name: ObsErrorModelStepwiseLinear@ObsFunction
      options:
        xvar:
          name: ObsValue/surface_pressure
        xvals: [85000, 80000]
        errors: [120, 140]
obs post filters:
- filter: Perform Action
  filter variables:
  - name: surface_pressure
  action:
    name: inflate error
    inflation variable:
      name: ObsErrorFactorSfcPressure@ObsFunction
      options:
        geovar_geomz: geopotential_height
        geovar_sfc_geomz: surface_geometric_height
